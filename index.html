<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ì—°ì²œêµ° ìì—°ê´€ê´‘ì§€</title>

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

  <!-- === í…Œë§ˆ ë³€ìˆ˜ (ë¡œê³  ê¸°ë°˜, ì„¸ë ¨ë˜ê²Œ ë³´ì •) === -->
  <style>
    :root{
      --primary: #0B63B8;       /* ë”¥ ë¸”ë£¨ - í—¤ë” / ì•¡ì…˜ */
      --secondary: #2E8B57;     /* í¬ë ˆìŠ¤íŠ¸ ê·¸ë¦° - ì„œë¸Œ ê°•ì¡° */
      --accent: #F9C300;        /* ì›œ ì˜ë¡œìš° - í¬ì¸íŠ¸ */
      --warn: #FF7043;          /* ì†Œí”„íŠ¸ ì˜¤ë Œì§€ - ê²½ê³ /í•˜ì´ë¼ì´íŠ¸ */
      --bg: #FAFBFC;            /* í˜ì´ì§€ ë°°ê²½ */
      --card-bg: #FFFFFF;       /* ì¹´ë“œ/íŒ¨ë„ ë°°ê²½ */
      --muted: #F1F6F9;         /* ì•½í•œ í˜¸ë²„ ë°°ê²½ */
      --text: #2B2B2B;          /* ë³¸ë¬¸ í…ìŠ¤íŠ¸ */
      --subtext: #6B747A;       /* ì„œë¸Œ í…ìŠ¤íŠ¸ */
      --soft-shadow: 0 6px 18px rgba(11,99,184,0.06);
    }

    /* ê¸°ë³¸ ë¦¬ì…‹ */
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background:var(--bg);
      color:var(--text);
      line-height:1.6;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* í—¤ë” */
    header{
      background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
      color: #fff;
      padding: 56px 20px;
      text-align:center;
      box-shadow: var(--soft-shadow);
      border-bottom: 1px solid rgba(255,255,255,0.06);
    }
    header h1{ font-size:1.9rem; font-weight:700; margin-bottom:6px; letter-spacing:-0.4px; }
    header p{ font-size:1.02rem; opacity:0.95; }

    .container{ max-width:1200px; margin:0 auto; padding:28px 20px; }

    /* íƒ­ ë„¤ë¹„ê²Œì´ì…˜ */
    .tabs{ display:flex; flex-wrap:wrap; gap:10px; margin-bottom:0; border-bottom:3px solid #e8edf2; overflow-x:auto; padding-bottom:0;}
    .tab{
      padding:10px 18px; background:var(--card-bg); border:2px solid transparent; border-bottom:none;
      cursor:pointer; font-size:15px; font-weight:500; border-radius:10px 10px 0 0;
      transition: all .18s ease; white-space:nowrap;
      box-shadow: 0 1px 4px rgba(9,30,66,0.04);
      color:var(--text);
    }
    .tab:hover{ background:var(--muted); transform: translateY(-2px); }
    .tab.active{
      background: var(--primary);
      color: #fff;
      border-color: var(--primary);
      box-shadow: 0 8px 18px rgba(11,99,184,0.12);
    }

    /* íƒ­ ì»¨í…ì¸  ì¹´ë“œ */
    .tab-content{
      display:none; background:var(--card-bg); padding:26px; border-radius:0 14px 14px 14px; box-shadow:var(--soft-shadow); margin-bottom:36px;
    }
    .tab-content.active{ display:block; animation:fadeIn .28s ease; }
    @keyframes fadeIn{ from{opacity:0; transform:translateY(8px)} to{opacity:1; transform:translateY(0)} }

    h2{ font-size:1.45rem; margin-bottom:16px; color:var(--text); }

    .columns{ display:grid; gap:18px; margin:16px 0; }
    .columns-2{ grid-template-columns: repeat(auto-fit, minmax(360px,1fr)); }

    /* ì •ë³´ ë°•ìŠ¤ */
    .info-box, .success-box, .warning-box, .error-box{
      padding:18px; border-radius:12px; background:linear-gradient(180deg,#fff,#fcfdff); border-left:4px solid var(--accent);
    }
    .success-box{ border-left-color:var(--secondary); background:#f3fbf5; }
    .warning-box{ border-left-color:var(--warn); background:#fff7f1; }
    .error-box{ border-left-color:#dc3545; background:#fff6f6; }

    /* ë¦¬ìŠ¤íŠ¸ ê·¸ë¦¬ë“œ & ì¹´ë“œ */
    .list-grid{ display:grid; gap:14px; grid-template-columns: repeat(auto-fill,minmax(240px,1fr)); margin-top:8px; }
    .card{ display:flex; gap:12px; align-items:flex-start; padding:10px; border-radius:12px; background:var(--card-bg); cursor:pointer; box-shadow:0 2px 8px rgba(11,99,184,0.04); transition:transform .14s, box-shadow .14s; }
    .card:hover{ transform:translateY(-6px); box-shadow:0 12px 26px rgba(11,99,184,0.08); }
    .card img{ width:110px; height:74px; object-fit:cover; border-radius:8px; flex-shrink:0; }
    .card .meta strong{ color:var(--primary); display:block; font-size:15px; }
    .card .meta small{ color:var(--subtext); display:block; margin-top:6px; font-size:13px; }

    /* ì§€ë„ ë°•ìŠ¤ */
    #map { height:520px; border-radius:12px; box-shadow:0 6px 18px rgba(9,30,66,0.06); border:1px solid rgba(8,40,112,0.03); }

    /* ìƒì„¸ íŒ¨ë„ */
    .detail-panel{ margin-top:16px; display:grid; gap:12px; }
    .gallery{ display:flex; gap:8px; overflow-x:auto; margin-top:8px; }
    .gallery img{ width:220px; height:140px; object-fit:cover; border-radius:10px; flex-shrink:0; }

    /* ë²„íŠ¼ ìŠ¤íƒ€ì¼(ê°„ë‹¨) */
    .btn { padding:10px 14px; border-radius:10px; background:var(--primary); color:#fff; border:none; cursor:pointer; font-weight:600; box-shadow:0 6px 12px rgba(11,99,184,0.12); }
    .btn.ghost{ background:var(--card-bg); color:var(--text); border:1px solid rgba(11,99,184,0.06); box-shadow:none; }

    /* í€´ì¦ˆ/ë©”íŠ¸ë¦­ */
    .metric{ text-align:center; padding:14px; background:var(--card-bg); border-radius:12px; box-shadow:0 2px 8px rgba(9,30,66,0.04); }
    .metric-value{ font-size:2.2rem; font-weight:800; color:var(--primary); }
    .metric-label{ color:var(--subtext); }

    .progress{ background:#e9eef6; border-radius:10px; height:28px; overflow:hidden; margin:12px 0; }
    .progress-bar{ height:100%; display:flex; align-items:center; justify-content:center; color:#fff; font-weight:700; transition:width .6s ease; background:linear-gradient(90deg,var(--primary),var(--secondary)); }

    footer{ background: linear-gradient(0deg, rgba(0,0,0,0.03), rgba(0,0,0,0.02)), var(--primary); color:#fff; text-align:center; padding:20px 16px; border-radius:8px; margin-top:18px; }
    footer p{ margin:6px 0; opacity:0.95; font-size:0.95rem; }

    /* small screens */
    @media (max-width:768px){
      header h1{ font-size:1.3rem }
      .tabs .tab{ padding:8px 12px; font-size:14px }
      .card img{ width:86px; height:60px; }
      #map{ height:360px }
      .gallery img{ width:160px; height:100px; }
    }
  </style>
</head>
<body>
  <header>
    <h1>ğŸŒ¿ ì—°ì²œêµ° ìì—°ê´€ê´‘ì§€</h1>
    <p>í•œíƒ„ê°• ì§€ì§ˆê³µì› Â· í­í¬ Â· ìˆ²ê¸¸ Â· ì „ë§ëŒ€ê¹Œì§€ ì—°ì²œì˜ ì£¼ìš” ìì—° ëª…ì†Œë¥¼ ì•ˆë‚´í•©ë‹ˆë‹¤</p>
  </header>

  <div class="container">
    <div class="tabs" role="tablist" aria-label="ë©”ë‰´">
      <button class="tab active" onclick="openTab('home')">í™ˆ</button>
      <button class="tab" onclick="openTab('tab-map')">ì§€ë„</button>
      <button class="tab" onclick="openTab('list')">ê´€ê´‘ì§€ ëª©ë¡</button>
      <button class="tab" onclick="openTab('tips')">ë°©ë¬¸ íŒ</button>
      <button class="tab" onclick="openTab('events')">í–‰ì‚¬Â·ê³µì§€</button>
      <button class="tab" onclick="openTab('contact')">ë¬¸ì˜</button>
    </div>

    <!-- í™ˆ -->
    <div id="home" class="tab-content active">
      <h2>ì—°ì²œêµ° ìì—°ê´€ê´‘ì§€ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤</h2>
      <div class="columns columns-2">
        <div class="info-box">
          <strong>ì†Œê°œ</strong><br>
          ì—°ì²œêµ°ì€ í•œíƒ„ê°• í˜‘ê³¡ê³¼ í­í¬, ìˆ²ê¸¸, ìŠµì§€ ë“± ë‹¤ì–‘í•œ ìì—°ê²½ê´€ì„ ë³´ìœ í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ ì‚¬ì´íŠ¸ëŠ”
          ë°©ë¬¸ ì „ ìœ„ì¹˜Â·ì‚¬ì§„Â·ì ‘ê·¼ ì •ë³´ë¥¼ í•œê³³ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ ë•ìŠµë‹ˆë‹¤.
        </div>
        <div class="success-box">
          <strong>ì‚¬ìš©ë²•</strong><br>
          - 'ì§€ë„' íƒ­ì—ì„œ ë§ˆì»¤ë¥¼ í´ë¦­í•˜ë©´ ìƒì„¸ì •ë³´ë¡œ ì´ë™í•©ë‹ˆë‹¤.<br>
          - 'ê´€ê´‘ì§€ ëª©ë¡'ì—ì„œ ì¥ì†Œë¥¼ ì„ íƒí•˜ë©´ ìƒì„¸ íŒ¨ë„ì´ ì—´ë¦½ë‹ˆë‹¤.
        </div>
      </div>

      <h2 style="margin-top:18px">ì¶”ì²œ ëª…ì†Œ</h2>
      <div id="featured-list" class="list-grid">
        <!-- JSì—ì„œ ì±„ì›ë‹ˆë‹¤ -->
      </div>
    </div>

    <!-- ì§€ë„ íƒ­ (id ì¶©ëŒ ë°©ì§€ë¡œ tab-map ì‚¬ìš©) -->
    <div id="tab-map" class="tab-content">
      <h2>ì „ì²´ ì§€ë„</h2>
      <div id="map" aria-label="ì§€ë„"></div>

      <div style="margin-top:12px;">
        <strong>ì°¾ê¸°:</strong>
        <input id="search-input" type="text" placeholder="ì¥ì†Œëª… ì…ë ¥ í›„ Enter" style="padding:8px 10px; width:60%; max-width:360px; border-radius:8px; border:1px solid #e6eef9;">
        <button class="btn ghost" onclick="fitToSearch()" style="margin-left:8px">ì°¾ê¸°</button>
      </div>
    </div>

    <!-- ëª©ë¡ -->
    <div id="list" class="tab-content">
      <h2>ê´€ê´‘ì§€ ëª©ë¡</h2>
      <div id="attraction-cards" class="list-grid"></div>

      <div id="detail" class="detail-panel" style="display:none"></div>
    </div>

    <!-- íŒ -->
    <div id="tips" class="tab-content">
      <h2>ë°©ë¬¸ íŒ</h2>
      <div class="info-box">
        - ì¼ë¶€ ëª…ì†ŒëŠ” í†µì‹ ì´ ë¶ˆì•ˆì •í•  ìˆ˜ ìˆì–´ ì˜¤í”„ë¼ì¸ ì§€ë„ë„ ì¤€ë¹„í•˜ì„¸ìš”.<br>
        - ì“°ë ˆê¸°ëŠ” ë°˜ë“œì‹œ ë˜ê°€ì ¸ê°€ê³ , ì•¼ìƒë™ë¬¼Â·ì‹ë¬¼ì„ í›¼ì†í•˜ì§€ ë§ˆì„¸ìš”.<br>
        - ê³„ê³¡Â·í­í¬ ì£¼ë³€ì€ ë¹„Â·ë‹¹ì¼ ê¸°ìƒì— ë”°ë¼ ìœ„í—˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      </div>
    </div>

    <!-- ì´ë²¤íŠ¸ -->
    <div id="events" class="tab-content">
      <h2>í–‰ì‚¬Â·ê³µì§€</h2>
      <div class="warning-box">
        ìµœì‹  ì¶•ì œ ì¼ì •Â·íƒë°©ë¡œ í†µì œ ì •ë³´ëŠ” ì—°ì²œêµ°ì²­ ê³µì§€ ë˜ëŠ” ê´€ê´‘ì•ˆë‚´ì„¼í„°ë¥¼ í™•ì¸í•˜ì„¸ìš”.
      </div>
    </div>

    <!-- ë¬¸ì˜ -->
    <div id="contact" class="tab-content">
      <h2>ë¬¸ì˜</h2>
      <div class="info-box">
        ğŸ“§ ì—°ì²œêµ° ê´€ê´‘ì•ˆë‚´: <strong>info@yeoncheon.go.kr</strong> (ì˜ˆì‹œ)<br>
        ğŸ“ ê´€ê´‘ë¬¸ì˜: <strong>031-XXX-XXXX</strong> (ì˜ˆì‹œ)
      </div>
    </div>

  </div>

  <footer>
    <p>ğŸŒ ì—°ì²œêµ° ìì—°ê´€ê´‘ ì•ˆë‚´</p>
    <p style="opacity:0.9">Â© <span id="year"></span> ì—°ì²œêµ°. All rights reserved.</p>
  </footer>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <script>
    // í˜„ì¬ ì—°ë„ í‘œì‹œ
    document.getElementById('year').textContent = new Date().getFullYear();

    // íƒ­ ì „í™˜ í•¨ìˆ˜
    function openTab(tabId){
      const contents = document.getElementsByClassName('tab-content');
      for(let c of contents) c.classList.remove('active');
      const tabs = document.getElementsByClassName('tab');
      for(let t of tabs) t.classList.remove('active');

      const target = document.getElementById(tabId);
      if (target) target.classList.add('active');

      // íƒ­ ë²„íŠ¼ active í† ê¸€ (ì²« ì¼ì¹˜ ë²„íŠ¼)
      const btns = Array.from(document.getElementsByClassName('tab'));
      for (let b of btns) {
        const on = b.getAttribute('onclick') || '';
        if (on.includes("'" + tabId + "'") || on.includes('"' + tabId + '"')) {
          b.classList.add('active');
          break;
        }
      }

      // íƒ­ì´ ì§€ë„ì¼ ê²½ìš° Leaflet ë¦¬ì‚¬ì´ì¦ˆ
      if (tabId === 'tab-map' && window._map) {
        setTimeout(()=> window._map.invalidateSize(), 220);
      }
      // ìŠ¤í¬ë¡¤ ë§¨ ìœ„
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    // ===== ì˜ˆì‹œ ë°ì´í„° (ì‹¤ì œ ë°ì´í„°ë¡œ êµì²´í•˜ì„¸ìš”) =====
    const attractions = [
      {
        id: 'hantan-river-canyon',
        name: 'í•œíƒ„ê°• ì§€ì§ˆê³µì› í˜‘ê³¡',
        lat: 38.0235, lon: 127.0487,
        short: 'í™”ì‚° í™œë™ê³¼ í•˜ì²œ ì¹¨ì‹ì´ ë§Œë“  ì ˆê²½ â€” ì§€ì§ˆí•™ì  ê°€ì¹˜ê°€ ë†’ì€ í˜‘ê³¡',
        desc: 'í•œíƒ„ê°•ì˜ ì£¼ìƒì ˆë¦¬ì™€ í˜‘ê³¡ì€ ë…íŠ¹í•œ ì§€ì§ˆ ê²½ê´€ì„ ë³´ì—¬ì¤ë‹ˆë‹¤. ì‚°ì±…ë¡œì™€ ì „ë§ëŒ€ê°€ ì˜ ì •ë¹„ë˜ì–´ ìˆì–´ ì‚¬ê³„ì ˆ ê°ìƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.',
        images: ['assets/images/hantan1.jpg','assets/images/hantan2.jpg'],
        access: 'ì°¨ë¡œ ì ‘ê·¼ ê¶Œì¥, ì£¼ì°¨ì¥ ìˆìŒ. ëŒ€ì¤‘êµí†µì€ ê³„ì ˆÂ·ì‹œê°„ëŒ€ í™•ì¸ í•„ìš”.',
        facilities: 'ì£¼ì°¨ì¥, í™”ì¥ì‹¤(ì¼ë¶€ ì§€ì—­), ì „ë§ëŒ€'
      },
      {
        id: 'jaein-falls',
        name: 'ì¬ì¸í­í¬',
        lat: 37.9291, lon: 127.0833,
        short: 'ê°€ì„ ë‹¨í’ ëª…ì†Œ â€” í­í¬ì™€ ìˆ²ê¸¸ì´ ì–´ìš°ëŸ¬ì§',
        desc: 'ì¬ì¸í­í¬ëŠ” ë¬¼ì¤„ê¸°ì™€ ì£¼ë³€ ë‹¨í’ì´ ì•„ë¦„ë‹¤ìš´ ëª…ì†Œì…ë‹ˆë‹¤. ê°€ë²¼ìš´ íŠ¸ë ˆí‚¹ ì½”ìŠ¤ë¡œ ê°€ì¡± ë‹¨ìœ„ ë°©ë¬¸ì— ì í•©í•©ë‹ˆë‹¤.',
        images: ['assets/images/jaein1.jpg','assets/images/jaein2.jpg'],
        access: 'ë§ˆì„ ì£¼ì°¨ í›„ ë„ë³´ 10~15ë¶„',
        facilities: 'ì†Œí˜• ì£¼ì°¨ì¥, ì•ˆë‚´í‘œì§€'
      },
      {
        id: 'cheonjeyeon',
        name: 'ì²œì œì—°ìŠµì§€(ì˜ˆì‹œ)',
        lat: 37.9780, lon: 127.0700,
        short: 'ìŠµì§€ì™€ ì•¼ìƒí™”ê°€ ì•„ë¦„ë‹¤ìš´ ìƒíƒœê³µê°„',
        desc: 'ìŠµì§€ ë³´í˜¸êµ¬ì—­ìœ¼ë¡œ ì² ìƒˆ ë„ë˜ì§€ ë° ë‹¤ì–‘í•œ ì‹ë¬¼ì´ ì„œì‹í•©ë‹ˆë‹¤. ìƒíƒœ íƒë°©ë¡œë¥¼ ì´ìš©í•˜ì„¸ìš”.',
        images: ['assets/images/swamp1.jpg'],
        access: 'íƒë°©ë¡œ ì…êµ¬ ì£¼ì°¨ì¥ ì´ìš©',
        facilities: 'íƒë°©ë¡œ, ì•ˆë‚´íŒ'
      },
      {
        id: 'forest-trail',
        name: 'ìˆ²ê¸¸ ë‘˜ë ˆê¸¸',
        lat: 37.9900, lon: 127.1100,
        short: 'ê±·ê¸° ì¢‹ì€ ìˆ²ê¸¸ ì½”ìŠ¤ â€” ì•½ 4km',
        desc: 'ì™„ë§Œí•œ ë‘˜ë ˆê¸¸ë¡œ ì´ˆë³´ìë„ ë¬´ë¦¬ ì—†ì´ ê±¸ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¤‘ê°„ ì¤‘ê°„ ì „ë§ëŒ€ì™€ ë²¤ì¹˜ê°€ ìˆìŠµë‹ˆë‹¤.',
        images: ['assets/images/trail1.jpg'],
        access: 'ëŒ€ì¤‘êµí†µ ê°€ëŠ¥, ë²„ìŠ¤ì •ë¥˜ì¥ ì¸ê·¼',
        facilities: 'ë²¤ì¹˜, í•´ì„¤íŒ'
      },
      {
        id: 'rock-formation',
        name: 'ê¸°ì•”ê´´ì„ ê´€ì°°ì§€',
        lat: 37.9500, lon: 127.0200,
        short: 'ë…íŠ¹í•œ ì•”ì„ êµ¬ì¡°ë¥¼ ê´€ì°°í•  ìˆ˜ ìˆëŠ” í¬ì¸íŠ¸',
        desc: 'í•˜ì²œë³€ ë° ì–¸ë•ì— ë¶„í¬í•œ ê¸°ì•”ê´´ì„ì€ ì‚¬ì§„ ì´¬ì˜ í¬ì¸íŠ¸ë¡œ ì¸ê¸°ì…ë‹ˆë‹¤.',
        images: ['assets/images/rock1.jpg'],
        access: 'ì£¼ì°¨ í›„ ì•½ê°„ì˜ ë„ë³´ í•„ìš”',
        facilities: 'ì£¼ì°¨, ì•ˆì „í‘œì§€'
      },
      {
        id: 'scenic-overlook',
        name: 'ì „ë§ëŒ€(ì¼ëª° í¬ì¸íŠ¸)',
        lat: 37.9650, lon: 127.0550,
        short: 'ì¼ëª°ê³¼ ì•¼ê²½ì´ ì•„ë¦„ë‹¤ìš´ ì „ë§ëŒ€',
        desc: 'ì„œìª½ìœ¼ë¡œ ì—´ë¦° ì „ë§ìœ¼ë¡œ ì„ì–‘ê³¼ ê°•ì¤„ê¸°ë¥¼ ë™ì‹œì— ê°ìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•ˆì „ì— ìœ ì˜í•˜ì„¸ìš”.',
        images: ['assets/images/view1.jpg'],
        access: 'ì°¨ëŸ‰ ì§„ì… ê°€ëŠ¥, ì†Œí˜• ì£¼ì°¨ì¥',
        facilities: 'ì£¼ì°¨ì¥, ì¡°ë§ëŒ€'
      }
    ];

    // ===== Leaflet ì§€ë„ ì´ˆê¸°í™” =====
    const mapCenter = [37.98, 127.06]; // ì—°ì²œ ì¤‘ì‹¬ (ìƒ˜í”Œ)
    const map = L.map('map').setView(mapCenter, 11);
    window._map = map;
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: 'Â© OpenStreetMap contributors'
    }).addTo(map);

    const markerGroup = L.layerGroup().addTo(map);
    const markersById = {};

    function createMarkers(){
      markerGroup.clearLayers();
      for (let a of attractions){
        const m = L.marker([a.lat, a.lon]).addTo(markerGroup);
        m.bindPopup(`<strong>${a.name}</strong><br>${a.short}<br><a href="#" onclick="showAttraction('${a.id}');return false;">ìì„¸íˆ ë³´ê¸°</a>`);
        m.on('click', ()=> showAttraction(a.id));
        markersById[a.id] = m;
      }
    }

    // ì¶”ì²œ ë¦¬ìŠ¤íŠ¸ ì±„ìš°ê¸° (í™ˆ)
    function renderFeatured(){
      const container = document.getElementById('featured-list');
      container.innerHTML = '';
      attractions.slice(0,4).forEach(a=>{
        const div = document.createElement('div');
        div.className = 'card';
        div.innerHTML = `<img src="${a.images[0] || 'assets/images/placeholder.jpg'}" alt="${a.name}">
                         <div class="meta"><strong>${a.name}</strong><small>${a.short}</small></div>`;
        div.onclick = ()=>{ openTab('list'); showAttraction(a.id); };
        container.appendChild(div);
      });
    }

    // ëª©ë¡ ë Œë”ë§
    function renderList(){
      const container = document.getElementById('attraction-cards');
      container.innerHTML = '';
      for (let a of attractions){
        const div = document.createElement('div');
        div.className = 'card';
        div.innerHTML = `<img src="${a.images[0] || 'assets/images/placeholder.jpg'}" alt="${a.name}">
                         <div class="meta"><strong>${a.name}</strong><small>${a.short}</small></div>`;
        div.onclick = ()=>{ showAttraction(a.id); focusOn(a.id); };
        container.appendChild(div);
      }
    }

    // ìƒì„¸ ë³´ê¸°
    function showAttraction(id){
      const a = attractions.find(x=>x.id===id);
      if (!a) return;
      const detail = document.getElementById('detail');
      detail.style.display = 'block';
      detail.innerHTML = `
        <div style="background:var(--card-bg); padding:18px; border-radius:12px; box-shadow:0 4px 14px rgba(9,30,66,0.04);">
          <h3 style="margin-bottom:8px; color:var(--primary)">${a.name}</h3>
          <div class="gallery">
            ${ (a.images && a.images.length) ? a.images.map(img=>`<img src="${img}" alt="${a.name}">`).join('') : '<img src="assets/images/placeholder.jpg" alt="ì´ë¯¸ì§€">'}
          </div>
          <p style="margin-top:12px">${a.desc}</p>
          <p><strong>ì´ìš©ì •ë³´:</strong> ${a.access || 'ì •ë³´ ì—†ìŒ'}</p>
          <p><strong>í¸ì˜ì‹œì„¤:</strong> ${a.facilities || 'ì •ë³´ ì—†ìŒ'}</p>
          <div style="margin-top:12px; display:flex; gap:10px; flex-wrap:wrap">
            <button class="btn" onclick="focusOn('${a.id}')">ì§€ë„ì—ì„œ ë³´ê¸°</button>
            <a class="btn ghost" href="#" onclick="openDirections(${a.lat},${a.lon});return false;">ê¸¸ì°¾ê¸°</a>
          </div>
        </div>
      `;
      // ìŠ¤í¬ë¡¤ ë³´ì •
      detail.scrollIntoView({ behavior:'smooth', block:'start' });
    }

    // í¬ì»¤ìŠ¤ (ì§€ë„ì—ì„œ ë³´ê¸°)
    function focusOn(id){
      const a = attractions.find(x=>x.id===id);
      if (!a) return;
      openTab('tab-map');
      setTimeout(()=> {
        map.setView([a.lat, a.lon], 13);
        const m = markersById[id];
        if (m) m.openPopup();
      }, 260);
    }

    // ê¸¸ì°¾ê¸° - Google Maps
    function openDirections(lat, lon){
      const url = `https://www.google.com/maps/dir/?api=1&destination=${lat},${lon}`;
      window.open(url, '_blank');
    }

    // ê²€ìƒ‰
    function fitToSearch(){
      const q = document.getElementById('search-input').value.trim().toLowerCase();
      if (!q) { alert('ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”.'); return; }
      const found = attractions.find(a => a.name.toLowerCase().includes(q));
      if (found){
        focusOn(found.id);
      } else {
        alert('ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤. ì •í™•í•œ ëª…ì¹­ ì¼ë¶€ë¥¼ ì…ë ¥í•´ë³´ì„¸ìš”.');
      }
    }

    // ì´ë¯¸ì§€ 404 ëŒ€ë¹„: placeholderë¡œ ëŒ€ì²´
    document.addEventListener('error', function(e){
      const t = e.target;
      if (t.tagName.toLowerCase() === 'img' && t.src && t.src.includes('assets/images/')) {
        t.src = 'assets/images/placeholder.jpg';
      }
    }, true);

    // ì´ˆê¸°í™”
    createMarkers();
    renderFeatured();
    renderList();

    // ì§€ë„ bounds ë§ì¶¤
    (function fitAll(){
      const pts = attractions.map(a=> [a.lat, a.lon]);
      if (pts.length){
        map.fitBounds(L.latLngBounds(pts), { padding:[40,40] });
      }
    })();

    // íƒ­ì—ì„œ Enterë¡œ ê²€ìƒ‰ ê°€ëŠ¥
    document.getElementById('search-input').addEventListener('keypress', function(e){
      if (e.key === 'Enter') fitToSearch();
    });

    // (ì„ íƒ) í€´ì¦ˆ ê¸°ëŠ¥ì„ ìœ ì§€í•˜ë ¤ë©´ ê¸°ì¡´ í€´ì¦ˆ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì—¬ê¸°ì— ì¶”ê°€í•˜ì‹œë©´ ë©ë‹ˆë‹¤.
  </script>

</body>
</html>
